# DIANDIAN Novel AI - AI 辅助小说创作平台

一个集成了 AI 写作助手、人物生成、情节构思、风格模仿等功能的本地化小说创作平台。支持本地 Ollama 模型及 OpenAI Compatible API (如 DeepSeek, Claude 等)。

##  核心功能

1.  **智能写作助手**
    *   **AI 续写**：根据当前剧情自动续写下文。
    *   **润色优化**：优化文笔，提升文学性。
    *   **扩写改写**：丰富段落细节或转换描写方式。
    *   **上下文感知**：AI 自动读取小说设定、人物小传和前文内容，保持剧情连贯。
    *   **流式响应**：打字机效果实时生成内容。

2.  **人物生成器**
    *   一键生成完整的人物档案（姓名、外貌、性格、背景）。
    *   支持关联特定小说，生成符合世界观的角色。
    *   支持保存到数据库并随时查阅。

3.  **灵感构思**
    *   **故事大纲**：快速生成起承转合的完整大纲。
    *   **情节转折**：卡文时提供意想不到的剧情走向。
    *   **脑洞片段**：基于关键词生成创意片段。
    *   **世界观设定**：辅助构建宏大的小说背景。

4.  **风格模仿**
    *   内置金庸、古龙、鲁迅等名家风格预设。
    *   支持自定义模仿提示词，让 AI 学习特定文风。

5.  **作品管理**
    *   **多作品管理**：创建、编辑、删除多部小说。
    *   **章节管理**：可视化目录，支持拖拽（待定）或点击管理。
    *   **版本控制**：支持手动创建章节快照，一键回滚历史版本，防止误删改。
    *   **作品导出**：支持导出为 TXT 或 Word 格式。

6.  **模型支持**
    *   **本地模型**：自动识别并调用 Ollama 本地运行的大模型。
    *   **在线 API**：支持 DeepSeek, Claude, Gemini 等 OpenAI 兼容接口。
    *   **自定义配置**：在个人中心随时切换模型、设置 API Key 和 Base URL。

##  快速开始

### 环境要求
*   **Python** 3.8+
*   **Node.js** 16+
*   (可选) **Ollama** (用于本地模型运行)

### 安装步骤(可忽略，修改了start.bat启动文件，可以直接启动)

1.  **后端依赖安装**
    ```bash
    cd backend
    pip install -r requirements.txt
    ```

2.  **前端依赖安装**
    ```bash
    cd frontend
    npm install
    ```

3.  **配置环境**
    *   在 `backend` 目录下创建 `.env` 文件（可参考 `.env.example`，如果系统未自动生成;已经给出了一个.env模板，只需修改其中的API Key和Base URL即可。）
    *   填写必要的 API Key (如果使用在线模型)。

### 启动项目

双击项目根目录下的 **`start.bat`** 脚本即可一键启动前后端服务。

*   **前端地址**: [http://localhost:5173](http://localhost:5173)
*   **后端 API**: [http://127.0.0.1:5000](http://127.0.0.1:5000)

##  技术栈

*   **Backend**: Python, Flask, SQLAlchemy, SQLite
*   **Frontend**: Vue 3, Vite, Tiptap (富文本编辑器)
*   **AI Integration**: OpenAI SDK (Compatible mode), Ollama API

##  开发日志

*   **2026-01-17**: 完成核心功能开发，包括写作助手、人物生成、灵感构思、风格模仿、作品管理（含版本控制与导出）。支持 SSE 流式输出与上下文感知。
*   **2026-01-22**: 修复start.bat未完全启动后端的问题，更新启动流程，现支持一键启动（无需单独下载依赖，启动start.bat即可一键下载所有依赖）。

##  License

MIT
